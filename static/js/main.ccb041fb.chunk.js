(this.webpackJsonpMyToDoList=this.webpackJsonpMyToDoList||[]).push([[0],{100:function(t,e,a){t.exports={text:"EditableSpan_text__1HoEv"}},103:function(t,e,a){t.exports={pageNotFound:"PageNotFound_pageNotFound__hpQqE"}},122:function(t,e,a){},149:function(t,e,a){"use strict";a.r(e);var n,c,i=a(0),o=a.n(i),r=(a(122),a(31)),s=a.n(r),l=a(92),d=a.n(l),u=a(15),O=a(18),j=a(14),T=a(93),b=a.n(T).a.create({withCredentials:!0,baseURL:"https://social-network.samuraijs.com/api/1.1",headers:{"API-KEY":"f5a121b3-d5d2-4866-a73a-ab1418f0e4d8"}}),f=function(){return b.get("todo-lists/")},p=function(t){return b.post("todo-lists/",{title:t})},S=function(t,e){return b.put("todo-lists/".concat(t),{title:e})},_=function(t){return b.delete("todo-lists/".concat(t))},h=function(t){return b.get("todo-lists/".concat(t,"/tasks/"))},E=function(t,e){return b.delete("todo-lists/".concat(t,"/tasks/").concat(e))},m=function(t,e){return b.post("todo-lists/".concat(t,"/tasks/"),{title:e})},I=function(t,e,a){return b.put("todo-lists/".concat(t,"/tasks/").concat(e),a)},g=function(t){return b.post("/auth/login",t)},D=function(){return b.get("/auth/me")},x=function(){return b.delete("/auth/login")};!function(t){t[t.New=0]="New",t[t.InProgress=1]="InProgress",t[t.Completed=2]="Completed",t[t.Draft=3]="Draft"}(n||(n={})),function(t){t[t.Low=0]="Low",t[t.Middle=1]="Middle",t[t.Hi=2]="Hi",t[t.Urgently=3]="Urgently",t[t.Later=4]="Later"}(c||(c={}));var v,y={status:"idle",error:null,isInitialized:!1};!function(t){t.SET_STATUS="TODOLIST/APP_REDUCER/SET-STATUS",t.SET_ERROR="TODOLIST/APP_REDUCER/SET_ERROR",t.SET_INITIALIZED="TODOLIST/APP_REDUCER/SET_INITIALIZED"}(v||(v={}));var k,C=function(t){return{type:v.SET_ERROR,payload:{error:t}}},L=function(t){return{type:v.SET_STATUS,payload:{status:t}}},A=function(t){return{type:v.SET_INITIALIZED,payload:{isInitialized:t}}},R=function(t,e){t.messages.length?e(C(t.messages[0])):e(C("Some error")),e(L("failed"))},N=function(t,e){e(C(t.message?t.message:"Some error")),e(L("failed"))},w={isLoggedIn:!1};!function(t){t.SET_IS_LOGGED_IN="TODOLIST/AUTH_REDUCER/SET_IS_LOGGED_IN"}(k||(k={}));var U,G={setIsLoggedInAC:function(t){return{type:k.SET_IS_LOGGED_IN,payload:{value:t}}}},P=a(204),F=a(205),K=a(207),M=a(208),H=a(209),B=a(210),V=a(211),z=a(1),Z=function(){var t=Object(O.b)(),e=Object(O.c)((function(t){return t.app.status})),a=Object(O.c)((function(t){return t.auth.isLoggedIn}));return Object(z.jsx)(P.a,{sx:{flexGrow:1},children:Object(z.jsxs)(F.a,{position:"static",children:[Object(z.jsxs)(K.a,{children:[Object(z.jsx)(M.a,{size:"large",edge:"start",color:"inherit","aria-label":"menu",sx:{mr:2}}),Object(z.jsx)(H.a,{variant:"h6",component:"div",sx:{flexGrow:1},children:"Todolist"}),a&&Object(z.jsx)(B.a,{variant:"outlined",onClick:function(){t((function(t){x().then((function(e){0===e.data.resultCode?(t(G.setIsLoggedInAC(!1)),t(L("succeeded"))):R(e.data,t)})).catch((function(e){N(e,t)}))}))},color:"inherit",children:"Logout"})]}),"loading"===e&&Object(z.jsx)(z.Fragment,{children:Object(z.jsx)(V.a,{})})]})})},W=a(68),Y=a.n(W),q=a(16),J=[];!function(t){t.REMOVE_TODOLIST="TODOLIST/TODOLIST_REDUCER/REMOVE-TODOLIST",t.ADD_TODOLIST="TODOLIST/TODOLIST_REDUCER/ADD_TODOLIST",t.CHANGE_TODOLIST_TITLE="TODOLIST/TODOLIST_REDUCER/CHANGE-TODOLIST-TITLE",t.CHANGE_TODOLIST_FILTER="TODOLIST/TODOLIST_REDUCER/CHANGE_TODOLIST_FILTER",t.CHANGE_TODOLIST_ENTITY_STATUS="TODOLIST/TODOLIST_REDUCER/CHANGE_TODOLIST_ENTITY_STATUS",t.SET_TODOS="TODOLIST/TODOLIST_REDUCER/SET_TODOS"}(U||(U={}));var Q,$=function(t){return{type:U.REMOVE_TODOLIST,payload:{id:t}}},X=function(t){return{type:U.ADD_TODOLIST,payload:{todolist:t}}},tt=function(t,e){return{type:U.CHANGE_TODOLIST_TITLE,payload:{id:t,title:e}}},et=function(t,e){return{type:U.CHANGE_TODOLIST_FILTER,payload:{id:t,filter:e}}},at=function(t){return{type:U.SET_TODOS,payload:{todos:t}}},nt=function(t,e){return{type:U.CHANGE_TODOLIST_ENTITY_STATUS,payload:{id:t,status:e}}},ct=a(5),it={};!function(t){t.REMOVE_TASK="TODOLIST/TASK_REDUCER/REMOVE_TASK",t.ADD_TASK="TODOLIST/TASK_REDUCER/ADD_TASK",t.UPDATE_TASK="TODOLIST/TASK_REDUCER/UPDATE_TASK",t.SET_TASKS="TODOLIST/TASK_REDUCER/SET-TASKS"}(Q||(Q={}));var ot,rt=function(t,e){return{type:Q.REMOVE_TASK,payload:{taskId:t,todolistId:e}}},st=function(t){return{type:Q.ADD_TASK,payload:{task:t}}},lt=function(t,e,a){return{type:Q.UPDATE_TASK,payload:{model:e,todolistId:a,taskId:t}}},dt=function(t,e){return{type:Q.SET_TASKS,payload:{tasks:t,todolistId:e}}},ut=function(t,e,a){return function(n,c){var i=c().tasks[e].find((function(e){return e.id===t}));if(i){var o=Object(j.a)({title:i.title,startDate:i.startDate,priority:i.priority,description:i.description,deadline:i.deadline,status:i.status},a);I(e,t,o).then((function(c){0===c.data.resultCode?n(lt(t,a,e)):R(c.data,n)})).catch((function(t){N(t,n)}))}}},Ot=a(13),jt=a(196),Tt=a(194),bt=o.a.memo((function(t){var e=t.addItem,a=t.label,n=t.disabled,c=void 0!==n&&n,o=Object(i.useState)(""),r=Object(Ot.a)(o,2),s=r[0],l=r[1],d=Object(i.useState)(!1),u=Object(Ot.a)(d,2),O=u[0],j=u[1],T=function(){""!==s.trim()?(e(s),l("")):j(!0)};return Object(z.jsxs)("div",{children:[Object(z.jsx)(jt.a,{disabled:c,variant:"standard",error:O,size:"small",value:s,onChange:function(t){l(t.currentTarget.value)},onKeyPress:function(t){j(!1),"Enter"===t.key&&T()},label:O?"Title is required":a}),Object(z.jsx)(M.a,{color:"primary",onClick:T,disabled:c,children:Object(z.jsx)(Tt.a,{})})]})})),ft=a(98),pt=a(99),St=a.n(pt),_t=a(100),ht=a.n(_t),Et=o.a.memo((function(t){var e=t.value,a=t.onChange,n=Object(i.useState)(!1),c=Object(Ot.a)(n,2),o=c[0],r=c[1],s=Object(i.useState)(e),l=Object(Ot.a)(s,2),d=l[0],u=l[1];return o?Object(z.jsx)(jt.a,{variant:"standard",value:d,onChange:function(t){u(t.currentTarget.value)},autoFocus:!0,onBlur:function(){r(!1),a(d)}}):Object(z.jsx)("span",{onDoubleClick:function(){r(!0),u(e)},className:ht.a.text,children:e})})),mt=a(77),It=a.n(mt),gt=a(195),Dt=a(198),xt=o.a.memo((function(t){var e=t.task,a=t.removeTask,c=t.todolistId,o=t.changeTaskStatus,r=t.changeTaskTitle,s=Object(i.useCallback)((function(){a(e.id,c)}),[e.id,c,a]),l=Object(i.useCallback)((function(t){var a=t.currentTarget.checked;o(e.id,a?n.Completed:n.New,c)}),[e.id,c,o]),d=Object(i.useCallback)((function(t){r(e.id,t,c)}),[e.id,c,r]);return Object(z.jsx)("div",{className:e.status===n.Completed?"is-done":"",children:Object(z.jsxs)("div",{className:It.a.containerTask,children:[Object(z.jsxs)("div",{className:It.a.mainBlock,children:[Object(z.jsx)(Dt.a,{checked:e.status===n.Completed,color:"primary",onChange:l}),Object(z.jsx)(Et,{value:e.title,onChange:d})]}),Object(z.jsx)(M.a,{onClick:s,size:"small",children:Object(z.jsx)(gt.a,{fontSize:"inherit"})})]})},e.id)})),vt=["demo","changeTaskStatus","addTaskCallBack","todolist","removeTodolistCallBack","changeTodolistTitleCallBack","changeTaskTitle","removeTask","changeFilterCallBack"],yt=o.a.memo((function(t){var e=t.demo,a=void 0!==e&&e,c=t.changeTaskStatus,o=t.addTaskCallBack,r=t.todolist,s=t.removeTodolistCallBack,l=t.changeTodolistTitleCallBack,d=t.changeTaskTitle,u=t.removeTask,j=t.changeFilterCallBack,T=Object(ft.a)(t,vt),b=Object(O.b)();Object(i.useEffect)((function(){var t;a||b((t=r.id,function(e){e(L("loading")),h(t).then((function(a){var n=a.data.items;e(dt(n,t)),e(L("succeeded"))}))}))}),[a,b,r.id]);var f=Object(i.useCallback)((function(t){o(t,r.id)}),[o,r.id]),p=Object(i.useCallback)((function(){s(r.id)}),[s,r.id]),S=Object(i.useCallback)((function(t){l(r.id,t)}),[l,r.id]),_=Object(i.useCallback)((function(t){j(t,r.id)}),[j,r.id]),E=T.tasks;return"active"===r.filter&&(E=E.filter((function(t){return t.status===n.New}))),"completed"===r.filter&&(E=E.filter((function(t){return t.status===n.Completed}))),Object(z.jsxs)("div",{children:[Object(z.jsxs)("div",{className:St.a.todolist__title,children:[Object(z.jsx)(Et,{value:r.title,onChange:S}),Object(z.jsx)(M.a,{onClick:p,disabled:"loading"===r.entityStatus,children:Object(z.jsx)(gt.a,{})})]}),Object(z.jsx)(bt,{label:"Name task",addItem:f,disabled:"loading"===r.entityStatus}),Object(z.jsx)("div",{children:E.map((function(t){return Object(z.jsx)(xt,{todolistId:r.id,task:t,removeTask:u,changeTaskStatus:c,changeTaskTitle:d},t.id)}))}),Object(z.jsxs)("div",{style:{paddingTop:"10px"},children:[Object(z.jsx)(B.a,{variant:"all"===r.filter?"outlined":"text",onClick:function(){return _("all")},color:"success",children:"All"}),Object(z.jsx)(B.a,{variant:"active"===r.filter?"outlined":"text",onClick:function(){return _("active")},color:"primary",children:"Active"}),Object(z.jsx)(B.a,{variant:"completed"===r.filter?"outlined":"text",onClick:function(){return _("completed")},color:"secondary",children:"Completed"})]})]})}));!function(t){t.MAIN_WINDOW="/",t.LOGIN="login",t.PAGE_NOT_FOUND="404",t.ERROR="*"}(ot||(ot={}));var kt=function(t){return t.app.isInitialized},Ct=function(t){return t.auth.isLoggedIn},Lt=function(t){return t.tasks},At=function(t){return t.todolists},Rt=a(203),Nt=a(206),wt=function(t){var e=t.demo,a=void 0!==e&&e,n=Object(O.b)(),c=Object(O.c)(At),o=Object(O.c)(Lt),r=Object(O.c)(Ct);Object(i.useEffect)((function(){!a&&r&&n((function(t){t(L("loading")),f().then((function(e){t(at(e.data)),t(L("succeeded"))}))}))}),[a,r,n]);var s=Object(i.useCallback)((function(t,e){n(function(t,e){return function(a){a(L("loading")),E(e,t).then((function(n){a(rt(t,e)),a(L("succeeded"))}))}}(t,e))}),[n]),l=Object(i.useCallback)((function(t,e){n(function(t,e){return function(a){a(L("loading")),m(t,e).then((function(t){if(0===t.data.resultCode){var e=t.data.data.item;a(st(e)),a(L("succeeded"))}else R(t.data,a)})).catch((function(t){N(t,a)}))}}(e,t))}),[n]),d=Object(i.useCallback)((function(t,e,a){n(ut(t,a,{status:e}))}),[n]),j=Object(i.useCallback)((function(t,e,a){n(ut(t,a,{title:e}))}),[n]),T=Object(i.useCallback)((function(t,e){n(et(e,t))}),[n]),b=Object(i.useCallback)((function(t){var e;n((e=t,function(t){t(L("loading")),t(nt(e,"loading")),_(e).then((function(a){t($(e)),t(L("succeeded"))}))}))}),[n]),h=Object(i.useCallback)((function(t,e){n(function(t,e){return function(a){a(L("loading")),S(t,e).then((function(n){a(tt(t,e)),a(L("succeeded"))}))}}(t,e))}),[n]),I=Object(i.useCallback)((function(t){n(function(t){return function(e){e(L("loading")),p(t).then((function(t){e(X(t.data.data.item)),e(L("succeeded"))}))}}(t))}),[n]);return r?Object(z.jsxs)(z.Fragment,{children:[Object(z.jsx)(Rt.a,{container:!0,className:Y.a.gridForm,children:Object(z.jsx)(bt,{label:"Name todolist",addItem:I})}),Object(z.jsx)(Rt.a,{container:!0,spacing:3,className:Y.a.gridTodolist,children:c.map((function(t){return Object(z.jsx)(Rt.a,{item:!0,children:Object(z.jsx)(Nt.a,{className:Y.a.paperStyle,children:Object(z.jsx)(yt,{todolist:t,tasks:o[t.id],removeTask:s,changeFilterCallBack:T,addTaskCallBack:l,changeTaskStatus:d,removeTodolistCallBack:b,changeTaskTitle:j,changeTodolistTitleCallBack:h,demo:a})})},t.id)}))})]}):Object(z.jsx)(u.a,{to:ot.LOGIN})},Ut=a(200),Gt=a(199),Pt=i.forwardRef((function(t,e){return Object(z.jsx)(Gt.a,Object(j.a)({elevation:6,ref:e,variant:"filled"},t))}));function Ft(){var t=Object(O.b)(),e=Object(O.c)((function(t){return t.app.error})),a=function(e,a){"clickaway"!==a&&t(C(null))},n=null!==e;return Object(z.jsx)(Ut.a,{open:n,autoHideDuration:6e3,onClose:a,children:Object(z.jsx)(Pt,{onClose:a,severity:"error",sx:{width:"100%"},children:e})})}var Kt=a(105),Mt=a(201),Ht=a(213),Bt=a(212),Vt=a(192),zt=function(){var t=Object(O.c)(Ct),e=Object(O.b)(),a=Object(Kt.a)({initialValues:{email:"",password:"",rememberMe:!1},validate:function(t){var e={};return t.email?/^[A-Z0-9._%+-]+@[A-Z0-9.-]+\.[A-Z]{2,4}$/i.test(t.email)||(e.email="Invalid email address"):e.email="Email is required",t.password?t.password.length<3&&(e.password="Password is too short"):e.password="Password is required",e},onSubmit:function(t){var n;e((n=t,function(t){t(L("loading")),g(n).then((function(e){0===e.data.resultCode?(t(G.setIsLoggedInAC(!0)),t(L("succeeded"))):R(e.data,t)})).catch((function(e){N(e,t)}))})),a.resetForm()}});return t?Object(z.jsx)(u.a,{to:ot.MAIN_WINDOW}):Object(z.jsx)(Rt.a,{container:!0,justifyContent:"center",children:Object(z.jsx)(Rt.a,{item:!0,justifyContent:"center",children:Object(z.jsxs)(Mt.a,{children:[Object(z.jsxs)(Vt.a,{children:[Object(z.jsxs)("p",{children:["To log in get registered",Object(z.jsx)("a",{href:"https://social-network.samuraijs.com/",target:"_blank",rel:"noreferrer",children:"here"})]}),Object(z.jsx)("p",{children:"or use common test account credentials:"}),Object(z.jsx)("p",{children:"Email: free@samuraijs.com"}),Object(z.jsx)("p",{children:"Password: free"})]}),Object(z.jsx)("form",{onSubmit:a.handleSubmit,children:Object(z.jsxs)(Bt.a,{children:[Object(z.jsx)(jt.a,Object(j.a)({label:"Email",margin:"normal"},a.getFieldProps("email"))),a.touched.email&&a.errors.email&&Object(z.jsx)("div",{style:{color:"red"},children:a.errors.email}),Object(z.jsx)(jt.a,Object(j.a)({label:"Password",type:"password",margin:"normal"},a.getFieldProps("password"))),a.touched.password&&a.errors.password&&Object(z.jsx)("div",{style:{color:"red"},children:a.errors.password}),Object(z.jsx)(Ht.a,{label:"Remember me",control:Object(z.jsx)(Dt.a,Object(j.a)({},a.getFieldProps("rememberMe")))}),Object(z.jsx)(B.a,{type:"submit",variant:"contained",color:"primary",children:"Login"})]})})]})})})},Zt=a(103),Wt=a.n(Zt),Yt=function(){return Object(z.jsx)("h1",{className:Wt.a.pageNotFound,children:"404. Page not found"})},qt=a(214),Jt=a(215),Qt=function(t){var e=t.demo,a=void 0!==e&&e,n=Object(O.b)(),c=Object(O.c)(kt);return Object(i.useEffect)((function(){n((function(t){D().then((function(e){0===e.data.resultCode&&t(G.setIsLoggedInAC(!0))})).finally((function(){t(A(!0))}))}))}),[n,c]),c?Object(z.jsxs)("div",{children:[Object(z.jsx)(Ft,{}),Object(z.jsx)(Z,{}),Object(z.jsx)(Jt.a,{fixed:!0,children:Object(z.jsxs)(u.d,{children:[Object(z.jsx)(u.b,{path:ot.MAIN_WINDOW,element:Object(z.jsx)(wt,{demo:a})}),Object(z.jsx)(u.b,{path:ot.LOGIN,element:Object(z.jsx)(zt,{})}),Object(z.jsx)(u.b,{path:ot.PAGE_NOT_FOUND,element:Object(z.jsx)(Yt,{})}),Object(z.jsx)(u.b,{path:ot.ERROR,element:Object(z.jsx)(u.a,{to:ot.PAGE_NOT_FOUND})})]})})]}):Object(z.jsx)("div",{className:d.a.preloader,children:Object(z.jsx)(qt.a,{})})},$t=a(69),Xt=a(104),te=Object($t.b)({tasks:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:it,e=arguments.length>1?arguments[1]:void 0;switch(e.type){case Q.REMOVE_TASK:return Object(j.a)(Object(j.a)({},t),{},Object(ct.a)({},e.payload.todolistId,t[e.payload.todolistId].filter((function(t){return t.id!==e.payload.taskId}))));case Q.ADD_TASK:return Object(j.a)(Object(j.a)({},t),{},Object(ct.a)({},e.payload.task.todoListId,[e.payload.task].concat(Object(q.a)(t[e.payload.task.todoListId]))));case Q.UPDATE_TASK:return Object(j.a)(Object(j.a)({},t),{},Object(ct.a)({},e.payload.todolistId,t[e.payload.todolistId].map((function(t){return t.id===e.payload.taskId?Object(j.a)(Object(j.a)({},t),e.payload.model):t}))));case U.ADD_TODOLIST:return Object(j.a)(Object(j.a)({},t),{},Object(ct.a)({},e.payload.todolist.id,[]));case U.REMOVE_TODOLIST:var a=Object(j.a)({},t);return delete a[e.payload.id],a;case U.SET_TODOS:var n=Object(j.a)({},t);return e.payload.todos.forEach((function(t){return n[t.id]=[]})),n;case Q.SET_TASKS:return Object(j.a)(Object(j.a)({},t),{},Object(ct.a)({},e.payload.todolistId,e.payload.tasks));default:return t}},todolists:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:J,e=arguments.length>1?arguments[1]:void 0;switch(e.type){case U.REMOVE_TODOLIST:return t.filter((function(t){return t.id!==e.payload.id}));case U.ADD_TODOLIST:return[Object(j.a)(Object(j.a)({},e.payload.todolist),{},{filter:"all",entityStatus:"idle"})].concat(Object(q.a)(t));case U.CHANGE_TODOLIST_TITLE:return t.map((function(t){return t.id===e.payload.id?Object(j.a)(Object(j.a)({},t),{},{title:e.payload.title}):t}));case U.CHANGE_TODOLIST_FILTER:return t.map((function(t){return t.id===e.payload.id?Object(j.a)(Object(j.a)({},t),{},{filter:e.payload.filter}):t}));case U.CHANGE_TODOLIST_ENTITY_STATUS:return t.map((function(t){return t.id===e.payload.id?Object(j.a)(Object(j.a)({},t),{},{entityStatus:e.payload.status}):t}));case U.SET_TODOS:return e.payload.todos.map((function(t){return Object(j.a)(Object(j.a)({},t),{},{filter:"all",entityStatus:"idle"})}));default:return t}},app:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:y,e=arguments.length>1?arguments[1]:void 0;switch(e.type){case v.SET_STATUS:return Object(j.a)(Object(j.a)({},t),{},{status:e.payload.status});case v.SET_ERROR:return Object(j.a)(Object(j.a)({},t),{},{error:e.payload.error});case v.SET_INITIALIZED:return Object(j.a)(Object(j.a)({},t),{},{isInitialized:e.payload.isInitialized});default:return t}},auth:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:w,e=arguments.length>1?arguments[1]:void 0;return e.type===k.SET_IS_LOGGED_IN?Object(j.a)(Object(j.a)({},t),{},{isLoggedIn:e.payload.value}):t}}),ee=Object($t.c)(te,Object($t.a)(Xt.a));window.store=ee;var ae=a(53);s.a.render(Object(z.jsx)(ae.a,{children:Object(z.jsx)(O.a,{store:ee,children:Object(z.jsx)(Qt,{})})}),document.getElementById("root"))},68:function(t,e,a){t.exports={gridForm:"TodolistList_gridForm__OjAVx",gridTodolist:"TodolistList_gridTodolist__2Lu6-",paperStyle:"TodolistList_paperStyle__3jQwE"}},77:function(t,e,a){t.exports={containerTask:"Task_containerTask__3GgPa"}},92:function(t,e,a){t.exports={preloader:"App_preloader__rdwnx"}},99:function(t,e,a){t.exports={todolist__title:"TodolistList_todolist__title__1P_46"}}},[[149,1,2]]]);
//# sourceMappingURL=main.ccb041fb.chunk.js.map